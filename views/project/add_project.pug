extends ../layout

block content

  script(src='https://code.jquery.com/jquery-3.3.1.min.js')
  script(src='https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js')
  script(src='https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap4.min.js')
  
  script(src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js')
  script(src='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.7.1/js/bootstrap-datepicker.js')
  link(href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/css/bootstrap.css', rel='stylesheet', type='text/css')
  link(href='https://cdn.datatables.net/1.10.16/css/dataTables.bootstrap4.min.css', rel='stylesheet', type='text/css')
  link(href='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.7.1/css/bootstrap-datepicker.css', rel='stylesheet')

  link(rel='stylesheet', href='https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css', integrity='sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm', crossorigin='anonymous')
  link(href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css', rel='stylesheet', integrity='sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN', crossorigin='anonymous')
  script(src='https://cdn.jsdelivr.net/npm/gijgo@1.9.6/js/gijgo.min.js', type='text/javascript')
  link(href='https://cdn.jsdelivr.net/npm/gijgo@1.9.6/css/gijgo.min.css', rel='stylesheet', type='text/css')

  // script(src='/js/moment.js')
  .container
    h1.main-title Create Project
    form(action=`/project/add_project`, method = 'POST')
    .form-group
      label(for='name') 프로젝트명
      input.form-control(type='text', name='pro_name', placeholder='ProjectName')
    .form-group
      label(for='order') Order
      select.form-control(type='text',name="order")
        each project in projects
          option=project.order_content
    .form-group
      label(for='pro_start') 프로젝트 시작
      input#startDate.form-control(type='date',name='pro_start', placeholder='Start Date',size='35')
    .form-group
      label(for='pro_end') 프로젝트 끝
      input#endDate.form-control(type='date',name='pro_end', placeholder='End Date')
    .form-group
    
      label(for='edu') 참여 인력 선택
      .row
        .col-sm-8
          select.form-control(type='text',name="employee")
            each employee in employees
              option=' 사원번호 : '+employee.emp_id +'/ 이름 : '+employee.emp_name + '/  경력: '+employee.emp_workyear
        .col-sm-4
          select.form-control(type='text',name="role")
            each role_er in role_ers
              option=role_er.role_name
        button#selectBtn.btn.btn-outline.btn-primary.pull-left(type='button') 추가

    #empData1.col-lg-12
    #empData2.col-lg-12
    #id1.col-lg-12
    #id.col-lg-12
    #dept.col-lg-12
    #name.col-lg-12
    #status.col-lg-12
    #emp_edu.col-lg-12
    #hiredate.col-lg-12
    #workyear.col-lg-12
    #role.col-lg-12

  br
  .container
    button#selectBtn.btn.btn-outline.btn-primary.pull-left(type='button') 선택
    table#emptable.table.table-bordered.table-striped.table-hover
      thead
        tr
          th
            input(type='checkbox', name='user_CheckBox')
          th 직원번호
          th 부서
          th 이름
          th 재직구분
          th 학력
          th 입사날짜
          th 경력
          th Role

      tbody#myTable
        each employee in employees
          tr
            td
              input#myCheck(type='checkbox', name='user_CheckBox', onclick='myFunction()')
            td
              a(href=`/employee/${employee.emp_id}`)= employee.emp_id
            td= employee.dept_name
            td= employee.emp_name
            td= employee.emp_status 
            td= employee.emp_edu  
            td= employee.emp_hiredate 
            td= employee.emp_workyear  
            td
              select(name='er_role')
                option PM
                option PL
                option 개발
                option 테스트


    button.btn.btn-dark(type='submit') 등록
  br
  br
  br
  br
  br
  p Display some text when the checkbox is checked:
  | Test checkbox: 
  input(type='checkbox')
  p#text(style='display:none') Checkbox is CHECKED!
  br
  br
  br
  br
  br
    
  script.
    $(document).ready(function(){
    $("#myInput").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#myTable tr").filter(function() {
    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    });
    });
    });

  script.
    function myFunction() {
    var checkBox = document.getElementById("myCheck");
    var text = document.getElementById("text");
    if (checkBox.checked == true){
    text.style.display = "block";
    } else {
    text.style.display = "none";
    }
    }

  script.
    // 상단 선택버튼 클릭시 체크된 Row의 값을 가져온다.
    $("#selectBtn").click(function(){
    var rowData = new Array();
    var tdArr = new Array();
    var checkbox = $("input[name=user_CheckBox]:checked");
    // 체크된 체크박스 값을 가져온다
    checkbox.each(function(i) {
    // checkbox.parent() : checkbox의 부모는 <td>이다.
    // checkbox.parent().parent() : <td>의 부모이므로 <tr>이다.
    var tr = checkbox.parent().parent().eq(i);
    var td = tr.children();
    // 체크된 row의 모든 값을 배열에 담는다.
    rowData.push(tr.text());
    // td.eq(0)은 체크박스 이므로  td.eq(1)의 값부터 가져온다.
    var id = td.eq(1).text()+", "
    var dept = td.eq(2).text()+", ";
    var name = td.eq(3).text()+", ";
    var status = td.eq(4).text()+", ";
    var emp_edu = td.eq(5).text()+", ";
    var hiredate = td.eq(6).text()+", ";
    var workyear = td.eq(7).text()+", ";
    var role = td.eq(8).text()+"/ ";

    // 가져온 값을 배열에 담는다.
    tdArr.push(id);
    tdArr.push(dept);
    tdArr.push(name);
    tdArr.push(status);
    tdArr.push(emp_edu);
    tdArr.push(hiredate);
    tdArr.push(workyear);
    tdArr.push(role);
    //console.log("id : " + id);

    });
    $("#empData1").html(" * 체크된 Row의 모든 데이터 = "+rowData);
    $("#empData2").html(tdArr);

    tdArr.forEach(function(entry) {
        $("#id1").html(entry);
    });

    $("#id").html(tdArr[0]);
    $("#dept").html(tdArr[1]);
    $("#name").html(tdArr[2]);
    $("#status").html(tdArr[3]);
    $("#emp_edu").html(tdArr[4]);
    $("#hiredate").html(tdArr[5]);
    $("#workyear").html(tdArr[6]);
    $("#role").html(tdArr[7]);

    });
    //Pagination Script
  script.
    $(document).ready(function() {
    $('#emptable').DataTable();
    } );
  script.
    $("#emptable thead tr th:first input:checkbox").click(function () {
    var checkedStatus = this.checked;
    $("#emptable tbody tr td:first-child input:checkbox").each(function () {
    this.checked = checkedStatus;
    });
    });


